{% extends 'template.html' %} {% block content %}
<div
    class="text-center"
    style="
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 50px;
    "
>
    <div
        style="
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2),
                0 6px 20px 0 rgba(0, 0, 0, 0.19);
            border-radius: 30px;
            width: 50%;
            background-color: rgb(33, 37, 41);
            padding: 100px;
            padding-bottom: 50px;
            padding-top: 50px;
            color: bisque;
        "
    >
        <p style="margin-bottom: 25px; font-size: 30px; font-weight: bold">
            Cache Keys
        </p>

        {% if keys %}
        <table id="myTable" class="table" style="color: white">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Hash</th>
                    <th scope="col">Image name</th>
                    <th scope="col">Last time used</th>
                    <th scope="col">Size (MB)</th>
                </tr>
            </thead>
            <tbody>
                {% for key in keys.keys(): %}
                <tr>
                    <th scope="row"></th>
                    <th scope="row">{{ keys[key]["hash"] }}</th>
                    <th scope="row">{{ keys[key]["name"] }}</th>
                    <th scope="row">{{ keys[key]["lastTimeUsed"] }}</th>
                    <th scope="row">{{ keys[key]["size"] }}</th>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% else %}
        <p style="font-size: larger; font-weight: bold; color: red">
            Cache is empty!
        </p>
        {% endif %}

        <a href="/get" style="font-size: small" class="badge badge-info"
            >Get image?</a
        >
    </div>
</div>

<script>
    const table = document.getElementById("myTable");

    for (var i = 1, row; (row = table.rows[i]); i++) {
        row.cells[0].innerHTML = i;
    }
</script>
{% endblock %}
